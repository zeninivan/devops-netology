
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Обязательная задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

>В моем понимании главное отличие всех трех типов виртуализации заключается в способе организации взаимодействия виртуальных машин с физическим сервером (хостом). В случае полной (аппаратной) виртуализации связь обеспечивает гипервизор, который выступает в роли операционной системы для хоста. В случае паравиртуализации связь обеспечивается связкой гипервизора и хостовой ОС. В случае виртуализации уровня ОС (контейнеризация) связь обеспечивается за счет хостовой ОС без участия гипервизора.


## Обязательная задача 2
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:

    физические сервера,
    паравиртуализация,
    виртуализация уровня ОС.

Условия использования:

    Высоконагруженная база данных, чувствительная к отказу.
    Различные web-приложения.
    Windows системы для использования бухгалтерским отделом.
    Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.
1. Высоконагруженная база данных, чувствительная к отказу. Думаю, в данном случае лучше всего подойдут физические сервера. Современные высоконагруженные базы — это огромное количество логики и компонентов: транзакции, процедуры, реляционные зависимости и т.д. При этом, вес у базы данных будет большой: гигабайты, Терабайты, а в аналитических базах даже петабайты. Его так просто в легковесных Docker-контейнерах не поднять.
2. Различные web-приложения. В данном случае можно воспользоваться виртуальной средой, например, использовать облачную инфраструктуру сторонних поставщиков услуг, таких как Amazon и Microsoft, чтобы динамически управлять распределением машинных ресурсов. Другими словами, если приложение испытывает огромный всплеск трафика, к которому серверы не готовы, то приложение не будет отключено.   
3. Windows системы для использования бухгалтерским отделом. Думаю, здесь подойдет паравиртуализация. Очень высокая производительность не потребуется. Масштаб системы, количество обращений, пики максимальных нагрузок предсказуемы. Нужно простое и надежное решение, например, Xen в режиме PV (паравиртуализация), развернутый на любом физическом хосте на террритории предприятия.
4. Высокопроизводительные расчеты на GPU. В данном случае можно использовать аппаратную виртуализация графического адаптера (Virtual GPU). Необходимо аппаратное обеспечение с возможностью установки графической карты и гипервизор для виртуализации рабочих столов. Реализовать данное решение можно на базе Citrix XenDesktop и VMware Horizon 6.1, Horizon 7, Microsoft. Графический адаптер разделяется на несколько vGPU, каждый из которых предоставляется пользователю (виртуальной машине), как отдельный графический адаптер. Гипервизор в этом варианте участвует только как средство для управления vGPU, а команды от каждой виртуальной машины передаются напрямую в графический адаптер.  

## Обязательная задача 3
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.


### Ответ:
Сценарий 1: 
Т.к. особых требований нет, то для создания инфраструктуры 100vm можно воспользоваться продуктами VMVare. Высокий уровень безопасности, хорошая поддержка и отсутствие ограничений по выбору операционной системы. Решения от VMWare являются наиболее сбалансированными с достаточно богатым функционалом.

Сценарий 2:
Т.к. речь идет о высокой производительности и Open source, то здесь нам подойдет KVM. Можно запустить практически любую операционную систему в качестве гостевой. KVM является нативным для большинства современных ядер Linux.
Это дает преимущество в производительности по сравнению с другими системами виртуализации.

Сценарий 3:
В данном случае можно воспользоваться продуктом Xen PV (паравиртуализация). Xen PV даст хорошую совместимость с Windows инфраструктурой в сочетании с высокой производительностью и исключительной стабильностью.   

Сценарий 4:
Для тестирования программного продукта подойдет Vagrant совместно с VirtualBox или с другим средством виртуализации, например, VMware Workstation. Vagrant является свободным и открытым ПО и хорошо подходит для создания и конфигурирования виртуальной среды разработки и тестирования.

## Обязательная задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Ответ:
Гетерогенные виртуальные среды могут быть неэффективными и сложными в управлении. 
Ниже приведены три ключевых принципа, которые помогут понять и реализовать все преимущества виртуализации:

   - Для гибридной среды нужны гибридные решения – необходимо использовать комплексные решения, которые смогут функционировать как в физической, так и в виртуальной среде;
   
   - Меньше – значит больше – нужно максимально снизить вероятность несовместимости технологий и упростить управление инфраструктурой для обеспечения совместимости и 
   масштабируемости ИТ-инфраструктуры в рамках всей виртуальной среды;
   
   - Необходимость в универсальной платформе для удобного перемещения и защиты данных – универсальная платформа упростит перемещение данных между гипервизорами и 
   обеспечит их надежную защиту, автоматически создавая виртуальные машины в качестве резервной копии физических серверов, чтобы не перемещать виртуальные машины полностью. 

Многие компании решили реализовывать пошаговую стратегию виртуализации ИТ-инфраструктуры, постепенно внедряя решения от различных производителей. 
Такой подход подразумевает, что определенные типы устройств выполняют собственные задачи, и при этом компания зависит от продукции разных вендоров. 
Для управления гибридной средой потребуется целый набор специалистов различного профиля. Также могут возникнуть проблемы совместимости различных технологий. 
При неверном подходе гетерогенная среда создаст дополнительные проблемы и снизит эффективность ИТ-инфраструктуры. 

На этапе интеграции решений по виртуализации от различных производителей будут появляться дополнительные трудности. 
Предположим, компания нуждается в портальном решении, которое содержит метарепозитарий, хранящийся на сервере СУБД, и слой серверов приложений. 
Сервер СУБД и его ресурсы уже размещены и виртуализированы на RISC-платформе, а вот на серверах приложений хотелось бы сэкономить, 
поэтому приобретаются недорогие Intel-серверы под управлением Red Hat 5 Linux. В результате на RISC- и Intel-серверах будут разные средства виртуализации, а интегрировать 
такое портальное решение с использованием сертифицированных решений производителя портального программного обеспечения будет практически невозможно.

Среди других «подводных камней» виртуализации следует отметить возможные проблемы, связанные с технической поддержкой решений, осуществляемой производителями 
программного обеспечения, проблемы лицензирования и проблемы централизованного мониторинга и управления средствами виртуализации. Производители программных продуктов, как правило, 
осуществляют техническую поддержку своих решений только в проверенных ими средах, а работоспособность в других не гарантируется. При использовании программного продукта в среде 
виртуализации, не поддерживаемой производителем программного обеспечения, могут возникнуть сложности с получением реальной поддержки. Например, имеется некое 
приложение в ОС Linux на виртуальной машине, реализованной VMware, и в процессе эксплуатации обнаруживается сообщение об ошибке приложения. Специалисты службы поддержки 
производителя приложения определяют, что причина ошибки в операционной системе, и перенаправляют запрос в службу поддержки ОС, работники которой будут утверждать, что ошибка 
возникает в среде виртуализации. Таким образом, путь прохождения заявки на техническую поддержку увеличивается.

Учитывая перечисленные факторы я бы постарался максимально упростить систему управления виртуальной среды ИТ-инфраструктуры.


