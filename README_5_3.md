# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Задача 1 
Сценарий выполения задачи:

создайте свой репозиторий на https://hub.docker.com;

выберете любой образ, который содержит веб-сервер Nginx;

создайте свой fork образа;

реализуйте функциональность: запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:

````
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
````

Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

### Ответ:
docker pull zeninivan/dev-netology1:first

````
ivan@HP-Pavilion-dv6:~$ docker images
REPOSITORY                TAG       IMAGE ID       CREATED         SIZE
zeninivan/dev-netology1   first     d90ffaae6e4a   8 seconds ago   196MB
nginx                     1.1       c706afe8b260   3 hours ago     196MB
nginx                     latest    0e901e68141f   6 days ago      142MB

ivan@HP-Pavilion-dv6:~$ docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED       STATUS       PORTS                               NAMES
e48cc72fc3f1   c706afe8b260   "/docker-entrypoint.…"   2 hours ago   Up 2 hours   0.0.0.0:80->80/tcp, :::80->80/tcp   gifted_swirles

ivan@HP-Pavilion-dv6:~$ docker exec -it e48cc72fc3f1 bash

root@e48cc72fc3f1:/etc/nginx# cd /usr/share/nginx/html
root@e48cc72fc3f1:/usr/share/nginx/html# cat index.html
<!DOCTYPE html>
<html>
<head>
Hey, Netology!
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
</style>
</head>
<body>
<h1>I'm DevOps Engineer!</h1>
</body>
</html>
root@e48cc72fc3f1:/usr/share/nginx/html# 
````

*Добавлен скриншот "Задание 1 снимок 1".*
![](https://github.com/zeninivA.png)

---

## Задача 2
Посмотрите на сценарий ниже и ответьте на вопрос: "Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

Сценарий:

    Высоконагруженное монолитное java веб-приложение;
    Nodejs веб-приложение;
    Мобильное приложение c версиями для Android и iOS;
    Шина данных на базе Apache Kafka;
    Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
    Мониторинг-стек на базе Prometheus и Grafana;
    MongoDB, как основное хранилище данных для java-приложения;
    Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.

### Ответ:
Высоконагруженное монолитное java веб-приложение:

	Монолитное веб-приложение представляет собой приложение, доставляемое через единое развертывание. В монолите все части находятся в одном и том же модуле (user interface, business logic, data access layer). 
	В монолите практически нет изоляции, все компоненты растут и меняются вместе. Исходя из архитектуры монолита, для его развертывания подойдет физический сервер либо виртуализация. Учитывая высоконагруженность, я бы 
	остановился на физической машине.

Nodejs веб-приложение:

	Node.js — это среда выполнения JavaScript, которую можно создать как на контейнерах, так и на виртуальных машинах, специально предназначенных для разработки быстрых и масштабируемых сетевых приложений.
	Учитывая современные тенденции и приемущества контейнеров в плане масштабируемости и потребления ресурсов системы, я бы выбрал контейнеры. 
	
Мобильное приложение c версиями для Android и iOS;

	В данном случае лучше всего подойдут виртуальные машины. Их проще и менее затратно эксплуатировать и будет в наличии GUI. 
	
Шина данных на базе Apache Kafka;

    Kafka позволяет с легкостью разграничить коммуникацию между различными микросервисами. С учетом огромного объема событий/запросов, которые Kafka может обрабатывать, будет возникать потребность в ее масштабировании.
    Я думаю контейнеры в данном случае будут более выигрышны.
	
Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;

	Elasticsearch можно установить на VM, отказоустойчивость решается на уровне кластера, logstash и kibana можно разместить как на VM, так и на контейнерах. 

Мониторинг-стек на базе Prometheus и Grafana;

	Prometheus получает метрики из разных сервисов и собирает их в одном месте. Grafana отображает данные из Prometheus в виде графиков и диаграмм, организованных в дашборды.
	Думаю здесь нет ограничений ни для VM, ни для контейнеров. Вопрос удобства и налчия ресурсов для эксплуатации той или иной системы.
	
MongoDB, как основное хранилище данных для java-приложения;

	Как основное хранилище данных я бы выбрал физический сервер, если позволяют финансы. На второе место поставлю VM.
	
Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry:

	В данном случае подойдет контейнеризация. GitLab как сторона сервера, контролирует сторону Runner для выполнения серии задач CI.
	Исходя из предположения, что Runner использует сборку Docker, все переключения зависимостей и переключения среды осуществляются путем 
	переключения разных образов, то есть сборка, а затем использование образа сборки. Полная изоляция окружающей среды через контейнеры с образами.
	Различные задачи CI фактически выполняются в контейнерах с использованием образов.
	Вся важная конфиденциальная информация, такая как пароли учетных записей и т. д., не должна записываться в конфигурацию CI и помещаться непосредственно в переменные среды GitLab.
---

## Задача 3

Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;

Запустите второй контейнер из образа debian в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;

Подключитесь к первому контейнеру с помощью docker exec и создайте текстовый файл любого содержания в /data;

Добавьте еще один файл в папку /data на хостовой машине;

Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /data контейнера.

### Ответ:

---

## Задача 4 (*)
Воспроизвести практическую часть лекции самостоятельно.

Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.

### Ответ:

---