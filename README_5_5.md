# Домашнее задание к занятию "5.5. Оркестрация кластером Docker контейнеров на примере Docker Swarm"

## Задача 1 
Дайте письменые ответы на следующие вопросы:

### Ответ:

- В чём отличие режимов работы сервисов в Docker Swarm кластере: replication и global?
   
Существует два типа развертывания сервисов в Docker Swarm кластере: Replicated (копирование) и  global (глобальное).

Replicated services:
Сервисов будет запущено столько, сколько задекларировать сразу при создании, либо до скольки отмасштабировать через docker service scale. Распределение контейнеров по кластеру ровным слоем.
	
Global services:
Будет запущен только один (не более) сервис на каждом узле кластера. Нет необходимости указывать количество сервисов заранее. Каждый раз, когда добавляется новый узел (node) в кластер, manager node создает задачу и планировщик назначает задачу новому узлу.


- Какой алгоритм выбора лидера используется в Docker Swarm кластере?
   
Для обеспечения отказоустойчивости в Docker Swarm обычно создают несколько серверов с ролью менеджера. Из них будет избираться лидер по алгоритму Raft. Raft — алгоритм для решения задач консенсуса в сети ненадёжных вычислений. Raft строится поверх кластера, на каждом из узлов которого работает некая машина состояний. Если обычный узел долго не получает сообщений от лидера, то он переходит в состояние «кандидат» и посылает другим узлам запрос на голосование. Другие узлы голосуют за того кандидата, от которого они получили первый запрос. Если кандидат получает сообщение от лидера, то он снимает свою кандидатуру и возвращается в обычное состояние. Если кандидат получает большинство голосов, то он становится лидером. Если же он не получил большинства, то кандидат ждёт случайное время и инициирует новую процедуру голосования. Процедура голосования повторяется, пока не будет выбран лидер. 

   
- Что такое Overlay Network?

Overlay-сети используются в контексте кластеров (Docker Swarm), где виртуальная сеть, которую используют контейнеры, связывает несколько физических хостов, на которых запущен Docker. Overlay-сеть создает подсеть, которую могут использовать контейнеры в разных хостах swarm-кластера. Контейнеры на разных физических хостах могут обмениваться данными по overlay-сети (если все они прикреплены к одной сети).

---

## Задача 2
Создать ваш первый Docker Swarm кластер в Яндекс.Облаке

Для получения зачета, вам необходимо предоставить скриншот из терминала (консоли), с выводом команды:

    docker node ls

### Ответ:

*Добавлен скриншот "DZ_5_5_Task_2_1_2022-06-29".*
![](https://github.com/zeninivan/devops-netology/blob/main/virt-screenshots/DZ_5_5_Task_2_1_2022-06-29.png)

*Добавлен скриншот "DZ_5_5_Task_2_2_2022-06-29".*
![](https://github.com/zeninivan/devops-netology/blob/main/virt-screenshots/DZ_5_5_Task_2_2_2022-06-29.png)

---

## Задача 3
Создать ваш первый, готовый к боевой эксплуатации кластер мониторинга, состоящий из стека микросервисов.

Для получения зачета, вам необходимо предоставить скриншот из терминала (консоли), с выводом команды:

    docker service ls

### Ответ:

*Добавлен скриншот "DZ_5_5_Task_3_1_2022-06-29".*
![](https://github.com/zeninivan/devops-netology/blob/main/virt-screenshots/DZ_5_5_Task_3_1_2022-06-29.png)

*Добавлен скриншот "DZ_5_5_Task_3_2_2022-06-29".*
![](https://github.com/zeninivan/devops-netology/blob/main/virt-screenshots/DZ_5_5_Task_3_2_2022-06-29.png)

---

## Задача 4 (*)
Выполнить на лидере Docker Swarm кластера команду (указанную ниже) и дать письменное описание её функционала, что она делает и зачем она нужна:

#### см.документацию: https://docs.docker.com/engine/swarm/swarm_manager_locking/
    docker swarm update --autolock=true

### Ответ:

---