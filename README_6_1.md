# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

    Электронные чеки в json виде
    Склады и автомобильные дороги для логистической компании
    Генеалогические деревья
    Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
    Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Ответ:
1. Электронные чеки в json виде - в данном случае подойдет документоориентированная система управления базами данных. Например, Mongo DB. Она считается одним из классических примеров NoSQL-систем, использующих JSON-подобные документы и схему базы данных. Исходя из обсуждения данного в вопроса в лекции - подойдет идеально для:
 - регистрация и хранение информации о событиях;
 - системы управления документами и контентом;
 - электронная коммерция;  

2. Склады и автомобильные дороги для логистической компании - логическая модель разрабатывается при использовании естественных для человека способов сбора и представления той информации, которую предполагается хранить в создаваемой базе данных логиста предприятия. Сущностями предполагаемой логической модели автоматизации рабочего места логиста являются: продажа, гараж, машина, путевой лист, товар, подкатегория, категория, артикул, водитель. Данные сущности имеют ряд присущих им свойств – атрибутов, а также они имеют связи между собой. Все связи являются неидентифицирующими, то есть они связывают независимые сущности. В результате построения модели предметной области в виде набора сущностей и связей получается связный граф. В итоге, наиболее подходящим типом СУБД для данной сущности я бы выбрал графовые СУБД. NoSQL БД, которые используют структуру графов для семантических запросов. Данные хранятся в виде узлов, ребер и свойств.

3. Генеалогические деревья - для хранения данных этого типа подойдет иерархическая модель. При использовании иерархической модели представления данных, связи между данными можно охарактеризовать с помощью упорядоченного графа (или дерева). 

4. Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации - СУДБ вида "ключ-значение". Из рассматриваемых в лекции можно отметить Memcached. 
Используется как распределенный кэш, все данные хранятся в оперативной памяти, данным можно присваивать Time-To-Live.

5. Отношения клиент-покупка для интернет-магазина - в данном случае подойдет реляционная модель БД. Основной единицей организации данных в таких БД являются таблицы, соответствующие обычным двумерным таблицам, привычным для пользователя,
например, экономиста. В таблицах БД столбцам соответствуют поля, а строкам - записи. Между таблицами устанавливаются связи (отношения) для возможности получения необходимых данных из двух и более таблиц. 
В БД интернет-магазина могут быть созданы две таблицы: «Заказ» и «Клиент», - связанные между собой. К данным указанных таблиц, использую средства СУБД, могут обращаться все заинтересованные пользователи (финансовый отдел, отдела продаж и т.д.) 

---

## Задача 2
Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

    Данные записываются на все узлы с задержкой до часа (асинхронная запись)
    При сетевых сбоях, система может разделиться на 2 раздельных кластера
    Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

### Ответ:
1. CA (по CAP), EL - PC (по PACELC)
2. AP (по CAP), PA - EL (по PACELC)
3. CP (по CAP), PA - EC (по PACELC)

---

## Задача 3 
Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ:
Сами принципы BASE (высокопроизводительные системы) и ACID (высоконадежные системы) противопоставлены друг другу. В лекции в теореме CAP говорится об условности понятий. Например, система может отвечать в течении часа - если ответ корректный, в рамках CAP теоремы, это доступная система. В рамках сложной системы могут частично сочетаться отдельные принципы из BASE и ACID. Любая БД, как и любая технология и подход вообще – это компромисс, на который придётся пойти в угоду чему-то. Многие БД NoSQL жертвуют согласованностью данных или другими свойствами из ACID ради более высокой производительности, получая которую, вы перекладываете дополнительную ответственность на ваше приложение. Либо вы используете БД, которая предоставляет гарантии ACID, и лишаете себя головной боли, но получаете меньшую производительность.

---

## Задача 4
Вам дали задачу написать системное решение, основой которого бы послужили:

    фиксация некоторых значений с временем жизни
    реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?

### Ответ:
key-value хранилище, которое имеет механизм Pub/Sub - это СУБД Redis. 

Redis можно отнести к NoSQL - семейству БД. Имеет слабые ACID свойства (уклон в сторону BASE для производительности). Синтаксис Redis не схож с SQL. Данные в момент работы хранятся в оперативной памяти, поэтому максимальный ее объем зависит от объема последней. Система репликации Redis сама по себе не поддерживает автоматическую отказоустойчивость: если ведущий узел выходит из строя, необходимо вручную выбрать нового ведущего среди ведомых узлов, либо доукомплектовать систему Redis Sentinel. Т.к. механизм Pub/Sub не поддерживает синхронную сквозную связь, обмен сообщениями Pub/Sub не подходит для мультимедиа (видео-конференции, VOIP, потоковая передача аудио/видео).

---
